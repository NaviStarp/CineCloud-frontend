<div class="container" *ngIf="!showVideo">
    <media-header></media-header>
  
    <div *ngIf="loading" class="flex flex-col items-center justify-center min-h-[300px]">
      <div class="spinner w-12 h-12 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"></div>
      <p class="mt-4 text-neutral-300">Cargando detalles de la serie...</p>
    </div>
  
    <div *ngIf="!loading" class="serie-container">
      <div class="relative h-[60vh] min-w-screen bg-cover bg-center" [ngStyle]="{'background-image': 'linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.8)), url(' + imageUrl + ')'}">
        <div class="absolute inset-0 flex items-end p-8">
          <div class="max-w-3xl">
            <h1 class="text-4xl font-bold text-white mb-2">{{ title }}</h1>
            <div class="flex flex-wrap gap-3 mb-3 text-sm text-neutral-300">
              <span>{{ releaseDate | date:'yyyy' }}</span>
              <span>•</span>
              <span>{{ temporadas }} temporada<span *ngIf="temporadas !== 1">s</span></span>
              <span>•</span>
              <span>{{ categories.join(', ') }}</span>
            </div>
            <p class="text-neutral-300 mb-6">{{ description }}</p>
            
            <div class="flex gap-3">
              <button *ngIf="episodes.length > 0" 
                      class="bg-primary-600 hover:bg-primary-700 text-white px-6 py-2 rounded-md flex items-center"
                      (click)="selectEpisode(episodes[0])">
                <fa-icon [icon]="faPlay" class="mr-2"></fa-icon> Reproducir
              </button>
              <button class="bg-neutral-700 hover:bg-neutral-600 text-white px-6 py-2 rounded-md flex items-center relative"
                      (click)="copyUrlToClipboard()">
                <fa-icon [icon]="faShare" class="mr-2"></fa-icon> Compartir
                <span *ngIf="showToolTip" 
                      class="absolute -top-10  left-1/2 transform -translate-x-1/2 bg-neutral-900 text-primary-400 text-xs px-2 py-1 rounded">
                  ¡Enlace copiado!
                </span>
              </button>
            </div>
          </div>
        </div>
      </div>
  

  
      <div class="mt-8 px-4 md:px-8">
        <div class="border-b border-neutral-700 mb-6">
          <div class="flex">
            <button [class]="selectedView === 'episodes' ? 'border-b-2 border-primary-500 text-white' : 'text-neutral-400'" 
                    class="py-3 px-6 font-medium"
                    (click)="selectedView = 'episodes'">
              Episodios
            </button>
            <button [class]="selectedView === 'related' ? 'border-b-2 border-primary-500 text-white' : 'text-neutral-400'"
                    class="py-3 px-6 font-medium"
                    (click)="selectedView = 'related'">
              Relacionados
            </button>
          </div>
        </div>
  
        <div *ngIf="selectedView === 'episodes'">
          <div *ngIf="episodes.length === 0" class="text-center py-8 text-neutral-400">
            No hay episodios disponibles para esta serie.
          </div>
          
          <app-episode-list 
            *ngIf="episodes.length > 0" 
            [episodes]="episodes"
            [seasons]="season"
            (episodeSelected)="selectEpisode($event)"
            class="mb-6">
          </app-episode-list>
        </div>
  
        <div *ngIf="selectedView === 'related'">
          <div *ngIf="filterMediaByRelation().length === 0" class="text-center py-8 text-neutral-400">
            No hay contenido relacionado disponible.
          </div>
          <app-media-carousel 
            *ngIf="filterMediaByRelation().length > 0"
            [items]="filterMediaByRelation()" 
            [title]="'Contenido relacionado'">
          </app-media-carousel>
        </div>
      </div>
    </div>
  </div>
<app-video-player *ngIf="showVideo" [videoUrl]="hlsUrl" (videoClosed)="showVideo = false"></app-video-player>